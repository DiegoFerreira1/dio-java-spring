# Aula 1: Fundamentos

- O que √© o Spring Framework
- Spring Versus Java EE
- Conceito de Invers√£o de Controle
- Inje√ß√£o de Depend√™ncias
- Beans \ Autowired \ Scopes

## O que √© o Spring Framework

O Spring Framework √© um framework open source de desenvolvimento de software para a plataforma Java, oferecendo uma infraestrutura abrangente para facilitar a cria√ß√£o de aplicativos Java empresariais. √â baseado nos padr√µes de projetos invers√£o de controle e inje√ß√£o de depend√™ncias.

Sua estrutura √© composta por m√≥dulos affins de reduzir a complexidade no desenvolvimento. Ele foi projetado para solucionar problemas comuns encontrados no desenvolvimento de aplicativos corporativos, como complexidade de configura√ß√£o, acoplamento r√≠gido e dificuldades de testabilidade. 

![modulos](img/springMod.png)

Em uma aplica√ß√£o que utiliza o Spring Framework conta com diversas funcionalidades para facilitar a constru√ß√£o do projeto. 

Aqui ser√° abordado o m√≥dulo **Core Container**, tamb√©m chamado de **Ioc** (**Invers√£o de controle e inje√ß√£o de depend√™ncias**).

## Core Container

O core container consiste de um dos m√≥dulos do Spring Framework que cuida das inje√ß√µes de depend√™ncias e invers√£o de controle em um determinado projeto java. O container possui quatro m√≥dulos principais:

- **Beans** - Onde se encontram as classes b√°sicas do framework que permitir√£o sua implementa√ß√£o no m√≥dulo beans.
- **Core** - onde s√£o implementadas as classes mais b√°sicas do framework.
- **Context** - onde s√£o implementadas as classes mais avan√ßadas.
- **Expression Language** - definem atrav√©s de xml ou anota√ß√µes em tempo de execu√ß√£o, valores e comportamentos dos beans.


Para utilizar o Spring Framework Core, √© preciso ter esse container dentro da aplica√ß√£o. Isso √© feito na defini√ß√£o do projeto, colocando os arquivos .jar dentro do projeto.

**S√£o eles**: 
- spring.core.3.1.1.RELEASE.jar 
- spring.beans.3.1.1.RELEASE.jar
- spring.context.3.1.1.RELEASE.jar 
- spring.expression.3.1.1.RELEASE.jar

Ao utilizar o **m√≥dulo Core Container** em uma aplica√ß√£o, o programador passa para o `Spring` a responsabilidade de gerenciar todo o ciclo de vida do objeto de neg√≥cio, tamb√©m denominado `bean`. Essa responsabilidade que √© passada do programador para o Spring √© denominada **Controle de Invers√£o**.

Ao instanciar e gerenciar os beans, o Spring j√° realiza a conex√£o com as depend√™ncias necess√°rias, a√ß√£o essa que √© chamada de **Inje√ß√£o de Depend√™ncias do Spring**.

Para o Spring gerenciar esses beans, √© preciso inicialmente o Spring conhecer qual a classe de origem desse objeto de neg√≥cio, ou seja, qual a classe respons√°vel por sua implementa√ß√£o, aquela que atende aos requisitos funcionais da aplica√ß√£o. Em seguida, √© preciso configurar os valores e comportamentos desses beans que ser√£o instanciados e gerenciados pelo Spring.

Essa configura√ß√£o pode ser feita, em java, utilizando xml, anota√ß√µes ou c√≥digo java. Ap√≥s o Spring conhecer essas configura√ß√µes, o bean estar√° pronto para uso para o restante do sistema, como mostra a Figura 2 [2] abaixo.
![dev](/img/dev.png)

## Spring vs. Java EE (Jakarta EE)

O cen√°rio do Java empresarial foi significativamente moldado por dois grandes players: Java Enterprise Edition (Java EE) e Spring Framework.

Ambas as estruturas s√£o essenciais no desenvolvimento de aplicativos corporativos robustos, escal√°veis ‚Äã‚Äãe eficientes, mas abordam suas solu√ß√µes com diferentes filosofias e arquiteturas.

Este guia abrangente tem como objetivo explorar as nuances do Java EE e do Spring, fornecendo uma compara√ß√£o clara para ajudar desenvolvedores e profissionais de TI a tomar decis√µes informadas para seus projetos.

![spring java](/img/springjava.png)


## 1. O que s√£o?

### **Java EE (Jakarta EE)**
- **Java Enterprise Edition** (agora chamado de **Jakarta EE** ap√≥s a transfer√™ncia para a Eclipse Foundation).
- √â um **framework de especifica√ß√µes** para o desenvolvimento de aplica√ß√µes empresariais. Ele define uma s√©rie de APIs e padr√µes que facilitam o desenvolvimento de aplica√ß√µes corporativas, como **servi√ßos web**, **transa√ß√µes**, **inje√ß√£o de depend√™ncias**, entre outros.
- Exemplos de tecnologias: **EJB (Enterprise JavaBeans)**, **JPA (Java Persistence API)**, **JMS (Java Message Service)**, **JSF (JavaServer Faces)**, **JAX-RS**.

### **Spring**
- Um **framework** de desenvolvimento para Java, focado em **agilidade** e **flexibilidade**. O Spring √© uma **alternativa** ao Java EE, com o objetivo de simplificar o desenvolvimento de aplicativos corporativos.
- Oferece **integra√ß√£o** de diversas tecnologias e **abordagens simplificadas** para tarefas como **inje√ß√£o de depend√™ncias** (DI), **programa√ß√£o orientada a aspectos** (AOP), **gest√£o de transa√ß√µes** e **acesso a dados**.
- Ao contr√°rio do Java EE, o Spring n√£o imp√µe uma abordagem espec√≠fica, sendo mais **flex√≠vel** e **modular**.

---

## 2. Principais Diferen√ßas

| **Aspecto**           | **Java EE (Jakarta EE)**                          | **Spring**                                         |
|-----------------------|---------------------------------------------------|---------------------------------------------------|
| **Arquitetura**        | Baseado em **especifica√ß√µes** e **containers** (ex: WildFly, GlassFish) | **Framework** modular e flex√≠vel, pode ser usado em qualquer container (como Tomcat, Jetty) |
| **Desenvolvimento**    | Mais **formal**, com especifica√ß√µes bem definidas. Pode ser mais **pesado** e complexo. | Mais **leve** e **flex√≠vel**, permitindo uma abordagem mais pragm√°tica e √°gil no desenvolvimento. |
| **Inje√ß√£o de Depend√™ncia** | Usando **CDI (Contexts and Dependency Injection)**, mais r√≠gido. | **Spring IoC (Inversion of Control)**, mais simples e intuitivo. |
| **Componentes**        | Requer uso de APIs **especificadas** pelo Java EE (ex: EJB, JMS, JSF). | Muito mais **modular**, permitindo o uso de componentes de forma independente (ex: Spring Boot, Spring Data). |
| **Facilidade de Uso**  | Tem uma curva de aprendizado maior devido √† quantidade de conceitos e normas. | Mais **facilidade de configura√ß√£o** e **flexibilidade**, principalmente com Spring Boot, que facilita a cria√ß√£o de microservi√ßos. |
| **Gerenciamento de Transa√ß√µes** | Utiliza **JTA (Java Transaction API)**, pode ser mais complexo. | **Spring Transaction Management**, mais simples e flex√≠vel. |
| **Microservices**      | **MicroProfile** foi introduzido no Java EE para suporte a microservi√ßos. | O **Spring Boot** √© muito usado para **microservi√ßos**, permitindo uma abordagem mais r√°pida e com menos configura√ß√£o. |

---

## 3. Quando usar cada um?

### **Java EE (Jakarta EE)**:
- Ideal para empresas que j√° possuem um **grande legado** de sistemas Java EE e precisam de um **framework robusto** com **padr√µes de mercado**.
- Boa escolha quando a aplica√ß√£o exige **compliance** com padr√µes e especifica√ß√µes empresariais (ex: EJBs, JPA).
  
### **Spring**:
- Melhor escolha para desenvolvedores que buscam **simplicidade**, **agilidade** e **flexibilidade** no desenvolvimento.
- Usado frequentemente em **microservi√ßos**, **aplica√ß√µes web**, e **backends modernos** devido √† sua **integra√ß√£o r√°pida** com diferentes tecnologias.
- **Spring Boot** facilita a cria√ß√£o de **aplica√ß√µes aut√¥nomas** e √© especialmente popular em **ambientes de nuvem**.

---

## 4. Vantagens de Cada um

| **Spring**                                  | **Java EE (Jakarta EE)**                      |
|---------------------------------------------|-----------------------------------------------|
| **Flex√≠vel**, modular e f√°cil de configurar | **Especifica√ß√µes** bem definidas, √≥timo para **grandes empresas** |
| Ideal para **microservi√ßos** e **arquiteturas modernas** | **Conformidade** com padr√µes industriais       |
| Ado√ß√£o crescente com **Spring Boot** para projetos r√°pidos e escal√°veis | Boa escolha para aplica√ß√µes **corporativas tradicionais** |
| **Mais comunidade** e **bibliotecas** para integra√ß√£o com outras tecnologias | **Suporte de longo prazo** e **estabilidade** no mercado |

---

## **Conclus√£o**:
- **Java EE (Jakarta EE)** √© um conjunto de especifica√ß√µes com uma **estrutural r√≠gida** e **pesada**, sendo uma escolha s√≥lida para **grandes empresas** e sistemas corporativos.
- **Spring** oferece um **framework mais flex√≠vel**, com foco em **simplicidade** e **produtividade**. Ele √© ideal para **microservi√ßos**, **cloud-native applications** e **desenvolvimento √°gil**.

Ambos t√™m seu valor, mas o **Spring** est√° se tornando a escolha preferida no desenvolvimento de aplica√ß√µes **modernas** e **din√¢micas**, especialmente para quem busca **agilidade**.

---

## üß† Invers√£o de Controle (IoC)?

Trata-se do redirecionamento do fluxo de execu√ß√£o de um c√≥digo retirando parcialmente o controle sobre ele e delegando-o para um container.

**Invers√£o de Controle** √© um **princ√≠pio de design** da programa√ß√£o orientada a objetos onde a responsabilidade de **criar e gerenciar depend√™ncias** de um objeto **n√£o √© do pr√≥prio objeto**, mas de um **container externo**.

Em vez de uma classe criar suas pr√≥prias depend√™ncias (por exemplo, com `new`), ela recebe essas depend√™ncias de fora ‚Äî geralmente por meio de um **framework**.

---

## üéØ Objetivo

- **Desacoplar** as classes.
- Tornar o sistema mais **flex√≠vel**, **test√°vel** e **f√°cil de manter**.

---

## üì¶ Exemplo pr√°tico (sem IoC)

```java
public class Carro {
    private Motor motor;

    public Carro() {
        this.motor = new Motor(); // Carro cria o Motor ‚Äî forte acoplamento
    }
}
```
> Neste exemplo, a classe `Carro` √© respons√°vel por instanciar o `Motor`. Se quisermos trocar o tipo de motor, teremos que mudar a `classe Carro`.`

## ‚úÖ Exemplo com IoC (Invers√£o de Controle)

```java
public class Carro {
    private Motor motor;

    public Carro(Motor motor) {
        this.motor = motor; // Motor √© "injetado" de fora
    }
}
```
> Agora, a responsabilidade de fornecer o `Motor` √© de quem cria o `Carro`, n√£o da `classe Carro`. Isso √© Invers√£o de Controle.

![antes](/img/antesioc.png)
![depois](/img/depoisioc.png)


## üí° Como isso √© feito na pr√°tica?
### Inje√ß√£o de depend√™ncia
√â um padr√£o de desenvolvimento com a finalidade de manter baixo o n√≠vel de acoplamento entre m√≥dulos de um sistema

Por meio de `Inje√ß√£o de Depend√™ncia` (Dependency Injection), que √© uma forma de implementar IoC. Um framework como o Spring pode fazer isso automaticamente:

```java
@Component
public class Carro {

    private final Motor motor;

    @Autowired
    public Carro(Motor motor) {
        this.motor = motor;
    }
}
```

> O Spring se encarrega de criar o `Motor` e injet√°-lo no `Carro`

```java
public class Carro {
    private Motor motor;

    public Carro(Motor motor) {
        this.motor = motor; // Motor √© "injetado" de fora
    }
}
```
> Agora, a responsabilidade de fornecer o `Motor` √© de quem cria o `Carro`, n√£o da `classe Carro`. Isso √© Invers√£o de Controle.

## üìå Benef√≠cios
- **Desacoplamento** entre componentes

- Facilita **testes unit√°rios** (usando `mocks`)

- Maior **reutiliza√ß√£o** de c√≥digo

- **Facilidade na manuten√ß√£o** e evolu√ß√£o do sistema

![injecaodep](/img/injecaodep.png)

## üí° Beans
Objeto que √© instanciado (criado), montado e gerenciado por um container atrav√©s do principio da invers√£o de valores.

![scopes](/img/scopes.png)

## üß≠ Scopes no Spring Framework

## üîç Scopes

**Scopes** definem o **tempo de vida** e **a visibilidade** de um **bean** no Spring. Em outras palavras, determinam quantas inst√¢ncias ser√£o criadas e onde elas poder√£o ser acessadas.

---

## üìö Escopos mais comuns no Spring

| Escopo         | Descri√ß√£o                                                                 | Quando usar                                      |
|----------------|---------------------------------------------------------------------------|--------------------------------------------------|
| `singleton`    | (Padr√£o) Cria **uma √∫nica inst√¢ncia** para todo o container Spring        | Quando o bean √© **stateless** (sem estado)       |
| `prototype`    | Cria **uma nova inst√¢ncia** a cada solicita√ß√£o do bean                    | Quando voc√™ precisa de **novos objetos sempre**  |
| `request`      | Cria **uma inst√¢ncia por requisi√ß√£o HTTP** (web apps)                     | Para armazenar **dados da requisi√ß√£o**           |
| `session`      | Cria **uma inst√¢ncia por sess√£o HTTP**                                    | Para armazenar **dados de sess√£o do usu√°rio**    |
| `application`  | Cria **uma inst√¢ncia por aplica√ß√£o web**                                  | Para **dados compartilhados entre sess√µes**      |
| `websocket`    | Cria **uma inst√¢ncia por WebSocket**                                      | Para **comunica√ß√£o em tempo real**               |

---

## üîß Como definir o escopo de um bean

```java
@Component
@Scope("prototype")
public class MeuBean {
    // Nova inst√¢ncia ser√° criada a cada uso
}
```

> ‚ÑπÔ∏è Se nenhum escopo for informado, o padr√£o √© `singleton`.

## üîÅ Exemplo: Singleton vs Prototype

```java
@Component
public class ExemploSingleton {
    public ExemploSingleton() {
        System.out.println("Inst√¢ncia √∫nica criada.");
    }
}
```
```java
@Component
@Scope("prototype")
public class ExemploPrototype {
    public ExemploPrototype() {
        System.out.println("Nova inst√¢ncia criada.");
    }
}
```

- **ExemploSingleton**: mesma inst√¢ncia usada sempre.

- **ExemploPrototype**: nova inst√¢ncia criada a cada inje√ß√£o.

### Dicas

√â preferivel usar singleton sempre que poss√≠vel (mais eficiente e simples).

Usamos prototype, request, session etc. apenas quando realmente necess√°rio, especialmente em aplica√ß√µes web com estados diferentes por usu√°rio ou requisi√ß√£o.

## üîß `@Autowired` no Spring

A anota√ß√£o `@Autowired` √© usada no **Spring Framework** para realizar a **inje√ß√£o autom√°tica de depend√™ncias**.

Uma anota√ß√£o (indica√ß√£o) onde dever√° ocorrer uma inje√ß√£o autom√°tica de depend√™nci.

- **byName** - √â buscado um m√©todo `set` que corresponde ao nome do Bean.
- **byType** - √â considerado o tipo de classe para inclus√£o do Bean.
- **byConstructor** - Usamos o construtor para incluir a depend√™ncia.
---

## ‚úÖ O que faz?

- Injeta automaticamente um **bean** em outro bean gerenciado pelo Spring.
- Pode ser aplicada em:
  - **Construtores**
  - **M√©todos**
  - **Atributos**

---

## üìå Exemplo

```java
@Component
public class Servico {
    @Autowired
    private Repositorio repositorio;
}
```

### Dicas

- √â recomendado usar @Autowired em construtores:

```java
@Component
public class Servico {
    private final Repositorio repositorio;

    @Autowired
    public Servico(Repositorio repositorio) {
        this.repositorio = repositorio;
    }
}
```

- Pode tornar a inje√ß√£o opcional:
```java
@Autowired(required = false)
private OutraClasse opcional;
```
> Funciona melhor com componentes gerenciados (@Component, @Service, @Repository, etc).





